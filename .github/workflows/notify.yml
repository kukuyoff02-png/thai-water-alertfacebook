name: Notify Water Level and Discharge

on:
  schedule:
    # This cron expression means:
    # - At minute 30 (07:30 and 17:00 THA)
    # - At hour 0 (00:xx UTC = 07:xx THA) and 10 (10:xx UTC = 17:xx THA)
    # - On every day of the month
    # - On every month
    # - On every day of the week
    - cron: '30 0,10 * * *' # Run at 00:30 UTC (07:30 THA) and 10:00 UTC (17:00 THA) daily
  workflow_dispatch: # Allows manual triggering from GitHub UI

jobs:
  run-script:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v3
        with:
          python-version: '3.9'
      - name: Install dependencies
        run: |
          pip install pandas openpyxl requests beautifulsoup4 selenium webdriver-manager pytz
      - name: Run Python script
        env:
          LINE_CHANNEL_ACCESS_TOKEN: ${{ secrets.LINE_CHANNEL_ACCESS_TOKEN }}
        run: python main.py
